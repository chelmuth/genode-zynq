autoload=yes
bootcmd=dhcp; run fpgacmd; run uenvboot; run sdboot
bootenv=boot/uEnv.txt
image=boot/uImage
binstream=boot/fpga.bin
bitstream=boot/fpga.bit
loadbootenv_addr=0x30000000
loadbootenv=load mmc 0:1 ${loadbootenv_addr} ${bootenv}
load_addr=0x10000000
loadbit_addr=0x100000
importbootenv=env import -t ${loadbootenv_addr}
sd_uEnvtxt_existence_test=test -e mmc 0:1 ${bootenv}
sd_image_existence_test=test -e mmc 0:1 ${image}
uenvboot=if run sd_uEnvtxt_existence_test; then run loadbootenv; run importbootenv; fi; if test -n $uenvcmd; then echo Running uenvcmd ...; run uenvcmd; fi
sdboot=if run sd_image_existence_test; then load mmc 0:1 ${load_addr} ${image}; bootm start ${load_addr}; bootm loados; bootm go; fi
sd_bitstream_existence_test=test -e mmc 0:1 ${bitstream}
sd_binstream_existence_test=test -e mmc 0:1 ${binstream}
fpgacmd=if run sd_bitstream_existence_test; then load mmc 0 ${loadbit_addr} ${bitstream} && fpga loadb 0 ${loadbit_addr} ${filesize}; else; if run sd_binstream_existence_test; then load mmc 0 ${loadbit_addr} ${binstream} && fpga load 0 {$loadbit_addr}; fi; fi
